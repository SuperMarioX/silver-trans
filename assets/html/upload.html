<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>upload</title>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <script src="../js/resumable.js"></script>
    <script src="../js/jquery-1.11.3.min.js"></script>
</head>
<body>
<a href="#" id="browseButton">Select files:<p id="fileName"></p></a>

<p id="process">0%</p>

<a href="#" onclick="r.cancel()">cancel</a>

<div id="dropTarget">将文件拖拽到此区域上传</div>

</body>


<script>
var i=0;
var r = new Resumable({
  target: 'upload.action',
  method: 'octet',
  chunkSize:1024*10,
  simultaneousUploads:4,
  //testChunks: true,
  throttleProgressCallbacks:1
});

r.assignBrowse(document.getElementById('browseButton'));
r.assignDrop(document.getElementById('dropTarget'));

r.on('fileSuccess', function(file){
    console.info('fileSuccess',file);
  });
r.on('fileProgress', function(file){
    //console.info('fileProgress', file);
  });
r.on('fileAdded', function(file, event){
    $("#fileName").html(file.fileName)
    r.upload();
    console.info('fileAdded', file);
  });
r.on('filesAdded', function(array){
    r.upload();
    console.info('filesAdded', array);
  });
r.on('fileRetry', function(file){
    console.info('fileRetry', file);
  });
r.on('fileError', function(file, message){
    console.info('fileError', file, message);
  });
r.on('uploadStart', function(){
    console.info('uploadStart');
  });
r.on('complete', function(){
    console.info('complete');
  });
r.on('progress', function(){
    //console.info('progress');
    $('#process').html(Math.round(r.progress()*10000)/100+'%')
  });
r.on('error', function(message, file){
    console.info('error', message, file);
  });
r.on('pause', function(){
    console.info('pause');
  });
r.on('cancel', function(){
    console.info('cancel');
  });

</script>

</html>